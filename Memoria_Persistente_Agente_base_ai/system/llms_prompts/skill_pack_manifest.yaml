# Skill Pack Manifest
# Este archivo actúa como el índice oficial y gobernado de capacidades (Skill Packs) disponibles para los agentes.
# Todo agente que desee usar un set de prompts/skills debe referenciar un ID válido de este manifiesto.

manifest_version: 1.3.0
last_updated: 2026-01-29
maintainer: Jay Ruz

# Definiciones de esquema para validación
schema_definitions:
  task_types: 
    - code          # Generación o modificación de código
    - decision      # Toma de decisiones con trade-offs
    - documentation # Generación de documentos
    - analysis      # Auditoría, revisión o investigación
  
  pack_types:
    - system_prompt    # Un prompt único que define personalidad/rol
    - workflow         # Un conjunto de pasos/prompts encadenados
    - tool_set         # Definición de herramientas (function calling specs)
    - kernel_protocol  # Protocolo obligatorio del sistema operativo (no opcional)

# Catálogo de Skill Packs
skill_packs:

  # --- Packs del Kernel (Obligatorios, NO opcionales) ---
  # Estos packs son parte del sistema operativo y se activan automáticamente
  # según las reglas definidas en system/instructivo_base.md
  
  - id: verification_cove_v1
    name: "Chain of Verification (CoVe)"
    version: "1.0.0"
    path: "kernel/verification/cove_v1/"
    type: "kernel_protocol"  # Protocolo obligatorio del sistema operativo
    purpose: "Protocolo de verificación estructurada para reducir hallucinations y sesgo de confirmación"
    task_types: [decision, analysis]
    trigger_conditions:
      mandatory:
        - "task_type=decision"
        - "task_type=analysis AND depth=deep"
        - "Generación de arquitectura"
        - "Documentación crítica"
      recommended:
        - "Generación de código complejo"
        - "Docs largos"
    input_contract:
      required:
        - user_query
        - context_flags
    output_contract:
      format: "structured"
      steps:
        - "PASO 1: Draft inicial"
        - "PASO 2: 3-5 preguntas de verificación"
        - "PASO 3: Respuestas independientes"
        - "PASO 4: Respuesta final corregida"
    metrics:
      baseline_accuracy: "68%"
      cove_accuracy: "94%"
      source: "Chain of Verification Research"
    notes: |
      Este protocolo es OBLIGATORIO cuando se cumplen las trigger_conditions.
      El agente NO puede saltarse los 4 pasos.
      Ver usuario/conocimiento_ai.md para justificación técnica.

  - id: react_tools_v1
    name: "ReAct (Reasoning + Acting)"
    version: "1.0.0"
    path: "kernel/tools/react_v1/"
    type: "kernel_protocol"  # Protocolo obligatorio cuando hay herramientas
    purpose: "Protocolo de razonamiento intercalado con acciones para uso auditable de herramientas"
    task_types: [code, decision, analysis, documentation]
    trigger_conditions:
      mandatory:
        - "capabilities.tools: true"
        - "Cualquier uso de herramientas externas"
      execution_order:
        - "1. ToT (si exploration: tree)"
        - "2. ReAct (este protocolo)"
        - "3. CoVe (si task_type=decision)"
    input_contract:
      required:
        - user_query
        - available_tools
        - tool_contracts
    output_contract:
      format: "structured"
      steps:
        - "Thought: [razonamiento]"
        - "Action: herramienta(params)"
        - "Observation: [resultado]"
        - "... (máx 5 ciclos)"
        - "Action: finish(respuesta)"
    limits:
      max_cycles: 5
      on_failure: "Failure Mode + Reverse Prompting"
    metrics:
      alfworld_improvement: "+34 puntos"
      hotpotqa_improvement: "+6 puntos"
      source: "ReAct: Synergizing Reasoning and Acting in LLMs (Yao et al., 2022)"
    notes: |
      Este protocolo es OBLIGATORIO cuando el agente tiene acceso a herramientas.
      Sin Thought no hay Action - toda herramienta requiere razonamiento previo.
      Máximo 5 ciclos antes de Failure Mode.
      Ver usuario/conocimiento_ai.md sección 8 para justificación técnica.

  # --- Packs Operativos (Ejemplos basados en instructivo) ---
  
  - id: decision_pack_v1
    name: "Decision Making Framework"
    version: "1.0.0"
    path: "packs/decision/v1/"
    type: "workflow"
    purpose: "Framework estructurado para toma de decisiones multicriterio"
    task_types: [decision]
    context_flags_required:
      domain: [promosmart, business]
    input_contract:
      required: 
        - problem_statement
        - constraints
        - options_list
    output_contract:
      format: "markdown"
      structure: 
        - "Análisis de contexto"
        - "Evaluación de opciones"
        - "Recomendación final"

  - id: documentation_pack_v1
    name: "Standard Documentation Generator"
    version: "1.0.0"
    path: "packs/documentation/v1/"
    type: "workflow"
    purpose: "Generación de documentación técnica compatible con instructivos Base AI"
    task_types: [documentation]
    input_contract:
      required: 
        - target_audience
        - scope
        - technical_details
    output_contract:
      format: "markdown"
      style: "Jay Ruz Style (Clear, Mermaid-rich)"

  - id: code_review_pack_v1
    name: "Code Review & Audit"
    version: "1.0.0"
    path: "packs/audit/v1/"
    type: "workflow"
    purpose: "Revisión de código buscando seguridad, performance y estilo"
    task_types: [code, analysis]
    input_contract:
      required: 
        - diff_or_files
        - language
    output_contract:
      format: "bullets"
      sections: [critical, major, minor, suggestions]

  # --- Packs de Exploración (Opcionales, activados por flag) ---
  
  - id: exploration_tot_pack_v1
    name: "Tree of Thoughts (ToT)"
    version: "1.0.0"
    path: "packs/exploration/tot_v1/"
    type: "workflow"
    purpose: "Exploración estructurada de múltiples caminos de razonamiento con evaluación y backtracking"
    task_types: [decision, analysis, code]
    trigger_conditions:
      flag_required: "exploration: tree"
      recommended_scenarios:
        - "Problemas con múltiples soluciones válidas"
        - "Tareas de planificación que requieren backtracking"
        - "Decisiones con trade-offs complejos"
        - "Diseño de arquitectura con alternativas"
        - "Optimización con múltiples enfoques"
    input_contract:
      required:
        - problem_statement
        - context_flags
      optional:
        - constraints
        - evaluation_criteria
    output_contract:
      format: "structured"
      steps:
        - "PASO 1: Generar 3 enfoques diferentes"
        - "PASO 2: Evaluar cada enfoque (viabilidad, riesgos, score 1-10)"
        - "PASO 3: Profundizar en el mejor (3 sub-pasos)"
        - "PASO 4: Backtrack si es necesario (máx 2 niveles)"
        - "PASO 5: Solución final con camino seleccionado"
    metrics:
      baseline_accuracy: "4-16% (CoT en tareas complejas)"
      tot_accuracy: "60-74%"
      token_cost_multiplier: "3-5x"
      source: "Tree of Thoughts: Deliberate Problem Solving with LLMs (Yao et al., 2023)"
    compatibility:
      works_with: [verification_cove_v1]  # ToT primero, CoVe después para validar
      execution_order: "ToT → CoVe (si task_type=decision)"
    notes: |
      Este skill pack es OPCIONAL, activado por flag `exploration: tree`.
      NO reemplaza CoVe - ambos pueden ejecutarse en secuencia.
      Usar cuando el problema justifica el costo adicional en tokens.
      Ver usuario/conocimiento_ai.md sección 7 para justificación técnica.

  # --- Packs Externos / Legacy (Mapeo de carpeta system-prompts) ---

  - id: cursor_agent_core
    name: "Cursor Agent Core Prompt"
    version: "1.2.0"
    path: "system-prompts/Cursor/Agent Prompt v1.2.txt"
    type: "system_prompt"
    purpose: "Prompt base para agentes de codificación general en Cursor"
    task_types: [code]
    input_contract:
      required: [user_query]
    output_contract:
      format: "mixed"

  - id: claude_architect
    name: "Claude System Architect"
    version: "3.5"
    path: "system-prompts/Anthropic/Sonnet 4.5 Prompt.txt"
    type: "system_prompt"
    purpose: "Capacidad de razonamiento complejo y arquitectura"
    task_types: [analysis, decision]
    input_contract:
      required: [system_context]
    output_contract:
      format: "text"

# --- Reglas de Uso ---
# 1. Si el pack no está en esta lista, NO EXISTE para el sistema.
# 2. Los agentes deben declarar en su config.yaml los IDs que consumen.
# 3. Al actualizar un pack, incrementar versión y mantener entrada anterior si hay agentes dependientes.
# 4. Los packs con type="kernel_protocol" son OBLIGATORIOS y se activan según system/instructivo_base.md.
#    - No requieren declaración explícita en config.yaml
#    - El agente NO puede desactivarlos
#    - Son parte del sistema operativo, no skills opcionales
